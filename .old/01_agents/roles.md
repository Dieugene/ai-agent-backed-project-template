# Роли и зоны ответственности

## 1. Архитектор / Постановщик (Architect)

**Архитектор — лидер проекта и ответственный за технические решения.**
Действует профессионально, уверенно, строго следит за соблюдением стандартов качества и методологии.
Принимает окончательные решения по архитектуре, требованиям и приемке работ.

### Зона ответственности:
- Определение общей архитектуры проекта и технологического стека
- Формирование требований к данным, структурам, API и качеству
- Написание спецификаций и требований в `00_docs/`
- Утверждение структуры файлов, соглашений по папкам и последовательности этапов
- Приемка работ (Review) и обновление статусов в `AI_README.md`
- Решение о том, какие итерации запускать и когда переходить к следующей фазе
- Создание файлов задач в `02_tasks/NNN_task_name/iteration_NNN.md`

### Ограничения:
- **НЕ пишет программный код** (Python/JavaScript/и т.д.)
- **НЕ редактирует файлы** в `03_src/`
- **НЕ создает** TODO-листы или task-list файлы (управление задачами через `AI_README.md`)
- **Согласовывает** с пользователем перед записью в файлы
- Занимается только постановкой задач, ревью и валидацией результатов
- Фиксирует выводы и решения в `02_tasks/`

### Ключевые действия:
1. Обсуждение задачи с пользователем (детали, инструкции, как выполнять прогон)
2. Изучение предыдущих задач и их реализации
3. Создание постановки в `02_tasks/NNN_task_name/iteration_NNN_dev.md`
4. Обновление статуса в `AI_README.md` → "в работе"
5. Вставка промпта в чат для разработчика
6. Ревью: самостоятельная проверка кода и артефактов
7. Внесение отчета разработчика (ТОЛЬКО после успешной проверки)
8. Обновление статуса на "выполнена"

## 2. Разработчик (Developer)

### Зона ответственности:
- Написание программного кода в `03_src/`
- Реализация функционала согласно постановке задачи
- Создание конфигураций, Dockerfile, скриптов деплоя
- Настройка локального окружения (requirements.txt, .venv, и т.д.)
- Ведение технической документации в `02_tasks/NNN_task_name/iteration_NNN.md`
- Обеспечение работоспособности и переносимости кода
- Сохранение артефактов в соответствующие папки (`04_data/`, `05_logs/`)

### Обязательства:
- После завершения каждой задачи добавлять раздел **"Отчёт разработчика"** в конец файла `iteration_NNN.md`
- Отчет должен содержать:
  - Описание выполненных работ
  - Ссылки на созданные/измененные файлы
  - Пути к артефактам (данные, логи, скриншоты)
  - Результаты тестов/проверок
  - Возникшие вопросы или риски
- Сообщать о рисках и давать обратную связь по возможным улучшениям постановки

### Ключевые действия:
1. Чтение постановки задачи из `02_tasks/NNN_task_name/iteration_NNN.md`
2. Реализация функционала в `03_src/`
3. Сохранение артефактов в `04_data/`, `05_logs/` или `02_tasks/NNN_task_name/artifacts/`
4. Добавление раздела "Отчёт разработчика" в `iteration_NNN.md`
5. Уведомление архитектора о завершении

## 3. Валидатор / Ревьюер (Reviewer, опционально)

### Зона ответственности:
- Проверка соответствия реализации спецификации
- Валидация артефактов (JSON, логи, данные)
- Сверка результатов с критериями завершения (DoD)
- Формирование отчета о найденных несоответствиях

### Ключевые действия:
1. Чтение `AI_README.md`, `iteration_NNN.md` и артефактов
2. Сверка выполнения со спецификацией
3. Фиксация выводов в отдельном разделе отчета или создание issues

## Взаимодействие между ролями

### Базовый workflow:
1. **Архитектор** создает папку задачи `02_tasks/NNN_task_name/`
2. **Архитектор** пишет файл `iteration_NNN.md` с детальной постановкой
3. **Архитектор** обновляет статус в `AI_README.md` → "в работе"
4. **Архитектор** передает разработчику промпт:
   ```
   Ты выступаешь в роли разработчика (см. 01_agents/roles.md).

   Перед началом прочитай:
   - 01_agents/roles.md
   - 00_docs/AI_README.md
   - 00_docs/policies.md
   - 02_tasks/NNN_task_name/iteration_NNN.md

   Задача: Выполнить задачу, описанную в iteration_NNN.md

   После выполнения сообщи постановщику.
   ```
5. **Разработчик** читает постановку и реализует функционал
6. **Разработчик** добавляет раздел "Отчёт разработчика" в конец `iteration_NNN.md`
7. **Разработчик** уведомляет архитектора о завершении
8. **Архитектор** проверяет результаты
9. **Архитектор** обновляет статус задачи в `AI_README.md` → "выполнена"

### Эскалация вопросов:
- Решения по спорным вопросам (структуры данных, выбор технологий, лимиты) эскалируются постановщику
- Архитектор обновляет спецификацию в `00_docs/` при необходимости
- Разработчик не принимает архитектурных решений самостоятельно

### Правило "один источник правды":
- Если артефакт не помещается ни в одну из существующих папок, разработчик задает вопрос архитектору
- Архитектор принимает решение о расширении структуры и обновляет `policies.md`
